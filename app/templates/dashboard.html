<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Digital Marketing Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

  <!-- Header -->
  <header class="header">
    <h1>Digital Marketing Dashboard</h1>
    <p>Meta & Google Ads Performance</p>
  </header>

  <!-- KPI Section -->
  <section class="kpi-grid">
  {% for kpi in kpis %}
  <div class="kpi-card">
    <span class="kpi-label">{{ kpi.label }}</span>
    <span class="kpi-value">{{ kpi.value }}</span>
  </div>
  {% endfor %}
</section>

  <!-- Filters -->
  <section class="filters">
  <select>
    <option>Date Range</option>
    {% for option in filters.date_range %}
    <option>{{ option }}</option>
    {% endfor %}
  </select>

  <select>
    <option>Platform</option>
    {% for option in filters.platform %}
    <option>{{ option }}</option>
    {% endfor %}
  </select>

  <select>
    <option>Campaign</option>
    {% for option in filters.campaign %}
    <option>{{ option }}</option>
    {% endfor %}
  </select>
</section>


  <!-- Charts -->
  <section class="charts">
  <div class="chart-card">
    <canvas id="spendLeadsChart"></canvas>
  </div>

  <div class="chart-card">
    <canvas id="cplChart"></canvas>
  </div>
</section>


  <!-- Table -->
  <section class="table-section">
    <h2>Campaign Performance</h2>

    <table>
      <thead>
        <tr>
          <th>Campaign</th>
          <th>Platform</th>
          <th>Spend</th>
          <th>Leads</th>
          <th>CPL</th>
        </tr>
      </thead>
      <tbody>
  {% for row in campaigns %}
  <tr>
    <td>{{ row.campaign }}</td>
    <td>{{ row.platform }}</td>
    <td>{{ row.spend }}</td>
    <td>{{ row.leads }}</td>
    <td>{{ row.cpl }}</td>
  </tr>
  {% endfor %}
</tbody>
    </table>
  </section>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const labels = {{ chart_data.labels | tojson }};
  
  new Chart(document.getElementById("spendLeadsChart"), {
    type: "line",
    data: {
      labels,
      datasets: [
        {
          label: "Spend (RM)",
          data: {{ chart_data.spend | tojson }},
          borderWidth: 2,
          tension: 0.3
        },
        {
          label: "Leads",
          data: {{ chart_data.leads | tojson }},
          borderWidth: 2,
          tension: 0.3
        }
      ]
    },
    options: {
      responsive: true,
      plugins: { legend: { position: "bottom" } }
    }
  });

  new Chart(document.getElementById("cplChart"), {
    type: "line",
    data: {
      labels,
      datasets: [
        {
          label: "CPL (RM)",
          data: {{ chart_data.cpl | tojson }},
          borderWidth: 2,
          tension: 0.3
        }
      ]
    },
    options: {
      responsive: true,
      plugins: { legend: { position: "bottom" } }
    }
  });
</script>


</body>
</html>
